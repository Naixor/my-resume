/*!
 * ====================================================
 * cvjs - v1.0.0 - 2016-03-18
 * https://github.com/Naixor/cv
 * GitHub: https://github.com/Naixor/cv 
 * Copyright (c) 2016 ; Licensed 
 * ====================================================
 */

!function(){function a(a){b.r([c[a]])}var b={r:function(a){if(b[a].inited)return b[a].value;if("function"!=typeof b[a].value)return b[a].inited=!0,b[a].value;var c={exports:{}},d=b[a].value(null,c.exports,c);if(b[a].inited=!0,b[a].value=d,void 0!==d)return d;for(var e in c.exports)if(c.exports.hasOwnProperty(e))return b[a].inited=!0,b[a].value=c.exports,c.exports}};b[0]={value:function(a,b,c){var d,e,f,g,h=function(a,b,c){d="[object HTMLCanvasElement]"===Object.prototype.toString.call(a)?a:document.querySelector(a),e=d.getContext("2d");var h=new Image;h.onload=function(){f=d.width=h.width,g=d.height=h.height,e.drawImage(h,0,0,f,g),c(e,f,g)},h.src=b};c.exports.init=h}},b[1]={value:function(a,c,d){d.exports={rgb2lab:b.r(4),rgb2xyz:b.r(5),lab2rgb:b.r(2),lab2xyz:b.r(3)}}},b[2]={value:function(a){var c=b.r(7),d=b.r(3);return function(a){return c(d(a))}}},b[3]={value:function(){return function(a){var b,c,d,e,f=a[0],g=a[1],h=a[2];return 8>=f?(c=100*f/903.3,e=7.787*(c/100)+16/116):(c=100*Math.pow((f+16)/116,3),e=Math.pow(c/100,1/3)),b=.008856>=b/95.047?b=95.047*(g/500+e-16/116)/7.787:95.047*Math.pow(g/500+e,3),d=.008859>=d/108.883?d=108.883*(e-h/200-16/116)/7.787:108.883*Math.pow(e-h/200,3),[b,c,d].map(function(a){return Math.round(a)})}}},b[4]={value:function(a){var c=b.r(5);return function(a){var b,d,e,f=c(a),g=f[0],h=f[1],i=f[2];return g/=95.047,h/=100,i/=108.883,g=g>.008856?Math.pow(g,1/3):7.787*g+16/116,h=h>.008856?Math.pow(h,1/3):7.787*h+16/116,i=i>.008856?Math.pow(i,1/3):7.787*i+16/116,b=116*h-16,d=500*(g-h),e=200*(h-i),[b,d,e].map(function(a){return Math.round(a)})}}},b[5]={value:function(a,b,c){function d(a){return a>.04045?Math.pow((a+.055)/1.055,2.4):a/12.92}return function(a){var b=a[0]/255,c=a[1]/255,e=a[2]/255;b=d(b),c=d(c),e=d(e);var f=.4124*b+.3576*c+.1805*e,g=.2126*b+.7152*c+.0722*e,h=.0193*b+.1192*c+.9505*e;return[100*f,100*g,100*h].map(function(a){return Math.round(a)})}}},b[6]={value:function(){return function(a){var b,c,d,e=a[0],f=a[1],g=a[2];return e/=95.047,f/=100,g/=108.883,e=e>.008856?Math.pow(e,1/3):7.787*e+16/116,f=f>.008856?Math.pow(f,1/3):7.787*f+16/116,g=g>.008856?Math.pow(g,1/3):7.787*g+16/116,b=116*f-16,c=500*(e-f),d=200*(f-g),[b,c,d].map(function(a){return Math.round(a)})}}},b[7]={value:function(a){return function(a){var b,c,d,e=a[0]/100,f=a[1]/100,g=a[2]/100;return b=3.2406*e+-1.5372*f+g*-.4986,c=e*-.9689+1.8758*f+.0415*g,d=.0557*e+f*-.204+1.057*g,b=b>.0031308?1.055*Math.pow(b,1/2.4)-.055:b=12.92*b,c=c>.0031308?1.055*Math.pow(c,1/2.4)-.055:c=12.92*c,d=d>.0031308?1.055*Math.pow(d,1/2.4)-.055:d=12.92*d,b=Math.min(Math.max(0,b),1),c=Math.min(Math.max(0,c),1),d=Math.min(Math.max(0,d),1),[255*b,255*c,255*d].map(function(a){return Math.round(a)})}}},b[8]={value:function(a,c,d){d.exports.filter={Gray:b.r(15),Gauss:b.r(14),Laplace:b.r(17),sLaplace:b.r(22),Sobel:b.r(20),Canny:b.r(11),Bilateral:b.r(10),DoG:b.r(13),Cartoon:b.r(12),HarrisCorner:b.r(16),SIFT:b.r(19),LoG:b.r(18),alphaCompositing:b.r(21)},d.exports.canvas=b.r(0)}},b[9]={value:function(a,c,d){return window.CV=d.exports=b.r(8)}},b[10]={value:function(a,b,c){var d=function(a,b,c,d,e,f,g){d=d||3,e=e||d/3,f=f||1,g=g||127;for(var h=new Array(2*d+1),i=new Array(511),j=1/(Math.sqrt(2*Math.PI)*e),k=-1/(2*e*e),l=1/(Math.sqrt(2*Math.PI)*f),m=-1/(2*f*f),n=0,o=-d;0>=o;o++)h[o+d]=h[d-o]=j*Math.exp(k*o*o),n+=h[o+d]+h[d-o];for(var o=0;256>o;o++)i[o]=i[0-o]=l*Math.exp(m*o*o);for(var p,j,q,r,s,t,u,v,w,x,y=0,z=0,A=0;c>A;A++)for(var B=0;b>B;B++){p=q=j=0,z=b*A+B<<2,v=w=x=0;for(var o=-d;d>=o;o++)r=B+o,r>=0&&b>r?(y=b*A+r<<2,s=h[o+d]*i[Math.round(a[y]-a[z])],t=h[o+d]*i[Math.round(a[y+1]-a[z+1])],u=h[o+d]*i[Math.round(a[y+2]-a[z+2])],p+=a[y]*s,j+=a[y+1]*t,q+=a[y+2]*u):(s=h[o+d]*i[Math.round(g-a[z])],t=h[o+d]*i[Math.round(g-a[z+1])],u=h[o+d]*i[Math.round(g-a[z+2])],p+=g*s,j+=g*t,q+=g*u),v+=s,w+=t,x+=u;a[z]=p/v,a[z+1]=j/w,a[z+2]=q/x}for(var B=0;b>B;B++)for(var A=0;c>A;A++){p=q=j=0,z=b*A+B<<2,v=w=x=0;for(var o=-d;d>=o;o++)r=A+o,r>=0&&c>r?(y=b*r+B<<2,s=h[o+d]*i[Math.round(a[y]-a[z])],t=h[o+d]*i[Math.round(a[y+1]-a[z+1])],u=h[o+d]*i[Math.round(a[y+2]-a[z+2])],p+=a[y]*s,j+=a[y+1]*t,q+=a[y+2]*u):(s=h[o+d]*i[Math.round(g-a[z])],t=h[o+d]*i[Math.round(g-a[z+1])],u=h[o+d]*i[Math.round(g-a[z+2])],p+=g*s,j+=g*t,q+=g*u),v+=s,w+=t,x+=u;a[z]=p/v,a[z+1]=j/w,a[z+2]=q/x}},e=function(a,b,c,d,e,f,g){d=d||3,e=e||d/3,f=f||1,g=g||127;for(var h=new Array(2*d+1),i=new Array(511),j=1/(Math.sqrt(2*Math.PI)*e),k=-1/(2*e*e),l=1/(Math.sqrt(2*Math.PI)*f),m=-1/(2*f*f),n=0,o=-d;0>=o;o++)h[o+d]=h[d-o]=j*Math.exp(k*o*o),n+=h[o+d]+h[d-o];for(var o=0;256>o;o++)i[o]=i[0-o]=l*Math.exp(m*o*o);for(var p,q,r,s,t=0,u=0,v=0;c>v;v++)for(var w=0;b>w;w++){p=0,u=b*v+w<<2,s=0;for(var o=-d;d>=o;o++)q=w+o,q>=0&&b>q?(t=b*v+q<<2,r=h[o+d]*i[Math.round(a[t]-a[u])],p+=a[t]*r):(r=h[o+d]*i[Math.round(g-a[u])],p+=g*r),s+=r;a[u]=p/s}for(var w=0;b>w;w++)for(var v=0;c>v;v++){p=0,u=b*v+w<<2,s=0;for(var o=-d;d>=o;o++)q=v+o,q>=0&&c>q?(t=b*q+w<<2,r=h[o+d]*i[Math.round(a[t]-a[u])],p+=a[t]*r):(r=h[o+d]*i[Math.round(g-a[u])],p+=g*r),s+=r;a[u]=p/s}};c.exports.process=d,c.exports.process.r=e}},b[11]={value:function(a,c,d){var e=b.r(26),f=b.r(14).process,g=function(a,b,c,d,g,h){for(var i=0;c>i;i++)for(var j=0;b>j;j++){var k=b*i+j<<2,l=.299*a[k]+.587*a[k+1]+.114*a[k+2];a[k]=l,a[k+1]=l,a[k+2]=l}d||(d=100),g||(g=d/2),h=h||127,f(a,b,c,2,1.4);var m,n,o,p,k,q=[-1,0,1,-1,0,1,-1,0,1],r=[1,1,1,0,0,0,-1,-1,-1],s=e.copyImageData(a),t=[],u=[],v=[];e.each.xDirection(a,b,0,0,b,c,function(a,d,f){t[a]=e.convolution(e.getImageConvolution(s,b,c,d,f,0,1,h),q,1,0)}),e.each.yDirection(a,b,0,0,b,c,function(a,d,f){m=e.convolution(e.getImageConvolution(s,b,c,d,f,0,1,h),r,1,0),v[a]=0===t[a]?1e3:m/t[a],u[a]=Math.round(Math.sqrt(t[a]*t[a]+m*m))}),s=e.copyImageData(a),e.each.xDirection(a,b,0,0,b,c,function(d,e,f){if(0===e||e===b-1||0===f||f===c-1)return u[d]=0,a[d]=a[d+1]=a[d+2]=0;switch(p=Math.floor(4*Math.atan(v[d])/Math.PI)){case 0:n=(u[(f-1)*b+e+1<<2]-u[f*b+e+1<<2])*v[d]+u[f*b+e+1<<2],o=(u[(f+1)*b+e-1<<2]-u[f*b+e-1<<2])*v[d]+u[f*b+e-1<<2];break;case 1:n=(u[(f-1)*b+e+1<<2]-u[(f-1)*b+e<<2])/v[d]+u[(f-1)*b+e<<2],o=(u[(f+1)*b+e-1<<2]-u[(f+1)*b+e<<2])/v[d]+u[(f+1)*b+e<<2];break;case-1:n=(u[(f-1)*b+e-1<<2]-u[(f-1)*b+e<<2])*v[d]*-1+u[(f-1)*b+e<<2],o=(u[(f+1)*b+e+1<<2]-u[(f+1)*b+e<<2])*v[d]*-1+u[(f+1)*b+e<<2];break;case-2:n=(u[(f-1)*b+e-1<<2]-u[f*b+e-1<<2])/v[d]*-1+u[f*b+e-1<<2],o=(u[f*b+e+1<<2]-u[(f+1)*b+e+1<<2])/v[d]*-1+u[(f+1)*b+e+1<<2]}u[d]>n&&u[d]>o?a[d]=a[d+1]=a[d+2]=255:a[d]=a[d+1]=a[d+2]=0}),e.each.xDirection(a,b,0,0,b,c,function(c,e,f){if(p=u[c],0!==a[c])if(p>=d)a[c]=a[c+1]=a[c+2]=255;else if(g>p)a[c]=a[c+1]=a[c+2]=0;else{a[c]=a[c+1]=a[c+2]=0;for(var h,i,j,k=[-1,0,1,-1,1,-1,0,1],l=[-1,-1,-1,0,0,1,1,1],c=0;8>c;c++)h=e+k[c],i=f+l[c],j=i*b+h<<2,u[j]>=d&&(a[c]=a[c+1]=a[c+2]=255)}})};d.exports.process=g}},b[12]={value:function(a,c,d){var e=b.r(26),f=b.r(10).process,g=b.r(13).process,h=b.r(11).process,i=b.r(1),j=function(a,b,c,d,j){var k,l,m,n,o,p,q,r,d=d||10,j=j||10,s=[];r=e.copyImageData(a),q=e.copyImageData(a),e.each.xDirection(a,b,0,0,b,c,function(b){m=a[b],n=a[b+1],o=a[b+2],k=i.rgb2lab([m,n,o]);for(var c=0;3>c;c++)s.push(k[c]);s.push(255)}),f.r(s,b,c,3,3,5),f.r(s,b,c,3,3,5),f.r(s,b,c,3,3,5),e.each.xDirection(s,b,0,0,b,c,function(a,b,c){p=Math.tanh(j*(d-s[a]%d)),s[a]=(Math.floor(s[a]/d)+.5)*d+p}),e.each.xDirection(a,b,0,0,b,c,function(b,c,d){m=s[b],n=s[b+1],o=s[b+2],l=i.lab2rgb([m,n,o]),a[b]=l[0],a[b+1]=l[1],a[b+2]=l[2]}),g(r,b,c,3,3,1,.6),h(q,b,c,50,20),e.each.xDirection(a,b,0,0,b,c,function(b){255===q[b]?a[b]=a[b+1]=a[b+2]=0:255===r[b]&&(a[b]=a[b+1]=a[b+2]=0)})};d.exports.process=j}},b[13]={value:function(a,c,d){var e=b.r(26),f=b.r(15).process,g=b.r(14).process,h=e.drawCorner,i=3,j=3,k=function(a,b,c,d,f,h,i,j){var k=e.copyToArray(a),l=e.copyToArray(a),m=new Array(b*c);return g(k,b,c,d,h,j),g(l,b,c,f,i,j),e.each.xDirection(a,b,0,0,b,c,function(a){m[a>>2]=k[a]-l[a]}),m},l=function(a,b,c,d,e,f){var g,h,j,k=0;if(a[1][d]<i&&a[1][d]>-i)return 0;for(var l=-1;1>=l;l++)if(h=f+l,!(0>h||h===c))for(var m=-1;1>=m;m++)if(g=e+m,!(0>g||g===b)){j=h*b+g;for(var n=0;3>n;n++)if(j!==d||1!==n)if(a[1][d]<a[n][j]){if(k>0)return 0;k=-1}else{if(!(a[1][d]>a[n][j]))return 0;if(0>k)return 0;k=1}}return k},m=function(a,b,c){return Math.pow(b,c)*a},n=function(a,b,c,d){f(a);var g=2,h=[],i=[];d=d||j;for(var n=Math.pow(2,.5),o=.5,p=d;p--;)h.push([m(o,n,p),m(o,n,p+1)]),i.push(e.copyToArray(a));return i.map(function(a,d){i[d]=k(a,b,c,g,g,h[d][0],h[d][1],!1)}),h=[],e.each.xDirection(a,b,0,0,b,c,function(a,d,e){var f=l(i,b,c,a>>2,d,e);f&&h.push({idx:a,x:d,y:e,corner:f})}),h},o=function(a,b,c,d,g,h,i,j,l){j=j||3,f(a);var m=k(a,b,c,d,g,h,i,l);e.each.xDirection(a,b,0,0,b,c,function(b){j>0?m[b>>2]<j?a[b]=a[b+1]=a[b+2]=0:a[b]=a[b+1]=a[b+2]=255:a[b]=a[b+1]=a[b+2]=m[b>>2]/(h-i)})},p=function(a,b,c,d){var f=e.copyImageData(a),g=n(f,b,c,d);g.map(function(d){switch(d.corner){case 1:h(a,b,c,d.x,d.y,[255,0,0]);break;case-1:h(a,b,c,d.x,d.y,[0,255,0]);break;default:throw new Error("有异常角点出现，请检测程序问题！")}})};d.exports.process=o,d.exports.corner=p,d.exports.diff=k,d.exports.max_min=l}},b[14]={value:function(a,c,d){var e=b.r(26),f=function(a,b,c,d,e,f){d=d||3,e=e||d/3,f=f||127;for(var g=new Array(2*d+1),h=1/(Math.sqrt(2*Math.PI)*e),i=-1/(2*e*e),j=0,k=-d;d>=k;k++)g[k+d]=h*Math.exp(i*k*k),j+=g[k+d];for(var k=0;d>=k;k++)g[k+d]=g[d-k]=g[d-k]/j;for(var l,h,m,n,o=0,p=0;c>p;p++)for(var q=0;b>q;q++){l=m=h=0;for(var k=-d;d>=k;k++)n=q+k,o=b*p+n<<2,n>=0&&b>n?(l+=a[o]*g[k+d],h+=a[o+1]*g[k+d],m+=a[o+2]*g[k+d]):f!==!1&&(l+=f*g[k+d],h+=f*g[k+d],m+=f*g[k+d]);o=b*p+q<<2,a[o]=l,a[o+1]=h,a[o+2]=m}for(var q=0;b>q;q++)for(var p=0;c>p;p++){l=m=h=0;for(var k=-d;d>=k;k++)n=p+k,o=b*n+q<<2,n>=0&&c>n?(l+=a[o]*g[k+d],h+=a[o+1]*g[k+d],m+=a[o+2]*g[k+d]):f!==!1&&(l+=f*g[k+d],h+=f*g[k+d],m+=f*g[k+d]);o=b*p+q<<2,a[o]=l,a[o+1]=h,a[o+2]=m}},g=function(a,b,c,d){e.each.xDirection(a,b,0,0,b,c,function(f,g,h){for(var i=0;3>i;i++)a[f+i]=e.convolution(e.getImageConvolution(a,b,c,g,h,i,1,d),[.0453542,.0566406,.0453542,.0566406,.0707355,.0566406,.0453542,.0566406,.0453542],.4787147,0)})};d.exports.process=f,d.exports.process["default"]=g}},b[15]={value:function(a,b,c){var d=function(a){for(var b=a.length-1,c=0;b>=0;)c=.299*a[b-3]+.587*a[b-2]+.114*a[b-1],a[b-3]=a[b-2]=a[b-1]=c,b-=4};c.exports.process=d}},b[16]={value:function(a,c,d){var e=b.r(24),f=b.r(26),g=(b.r(15).process,f.drawCorner),h=function(a,b){if(!(0>a)){var c,d,f=new Array(2*a+1),g=1/(Math.sqrt(2*Math.PI)*b),h=-1/(2*b*b),i=0;f.fill(0);for(var j=-a;0>=j;j++)f[j+a]=f[a-j]=g*Math.exp(h*j*j),i+=f[j+a]+f[a-j];return i-=f[a],f=f.map(function(a){return a/i}),c=new e(f.map(function(a){return[a]})),d=new e([f]),c["*"](d)}},i=function(a,b,c,d,e,f,g){var h,i,j=0,k=0,l=[],f=f||1,g=g||a[b*e+d];for(k=-f;f>=k;k++)for(h=e+k,j=-f;f>=j;j++)i=d+j,h>=c||0>h||i>=b||0>i?l.push(g):l.push(a[i+b*h]);return l},j=function(a){for(var b=[],c=0,d=a;d>=-a;d--){c=0===d?0:d/Math.abs(d)*Math.pow(2,a-Math.abs(d));for(var e=-a;a>=e;e++)b.push(c*Math.pow(2,a-Math.abs(e)))}return b},k=function(a){for(var b=[],c=0,d=a;d>=-a;d--)for(var e=a;e>=-a;e--)c=0===e?0:e/Math.abs(e)*Math.pow(2,a-Math.abs(e)),b.push(c*Math.pow(2,a-Math.abs(d)));return b},l=function(a,b,c,d,e,l,m){d=d||1,m=m||0;var n=h(d,1).reduce(function(a,b){return a.concat(b)}),o=b*c,p=new Float32Array(o),q=new Float32Array(o),r=new Float32Array(o),s=new Float32Array(o),t=new Float32Array(o),u=0,v=0,w=0,x=new Float32Array(o),y=0,z=0,A=j(d),B=k(d),C=f.copyImageData(a);f.each.xDirection(a,b,0,0,b,c,function(a,e,g){a>>=2,p[a]=f.convolution(f.getImageConvolution(C,b,c,e,g,0,d,m),A,1,0),q[a]=f.convolution(f.getImageConvolution(C,b,c,e,g,0,d,m),B,1,0)}),f.each.xDirection(a,b,0,0,b,c,function(a){a>>=2,r[a]=p[a]*p[a],s[a]=q[a]*q[a],t[a]=p[a]*q[a]}),e=e||.04,f.each.xDirection(a,b,0,0,b,c,function(a,g,h){a>>=2,u=f.convolution(i(r,b,c,g,h,d),n,1,0),v=f.convolution(i(t,b,c,g,h,d),n,1,0),w=f.convolution(i(s,b,c,g,h,d),n,1,0),x[a]=u*w-v*v-e*Math.pow(u+w,2),x[a]>y&&(y=x[a])}),l=l||.01,z=l*y,f.each.xDirection(a,b,0,0,b,c,function(a){a>>=2,x[a]<=z&&(x[a]=0)});for(var D=d;c-d>D;D++)for(var E=d;b-d>E;E++)for(var F=D*b+E,G=-d;0!==x[F]&&d>=G;G++)for(var H=-d;d>=H;H++)if(x[F]<x[E+G+b*(D+H)]){x[F]=0;break}f.each.xDirection(a,b,0,0,b,c,function(d,e,f){x[d>>2]&&g(a,b,c,e,f)})};d.exports.process=l}},b[17]={value:function(a,c,d){var e=b.r(26),f=b.r(15).process,g=function(a,b,c,d){d=d||127,f(a);var g=e.copyImageData(a);e.each.xDirection(a,b,0,0,b,c,function(f,h,i){for(var j=0;3>j;j++)a[f+j]=e.convolution(e.getImageConvolution(g,b,c,h,i,j,1,d),[0,-1,0,-1,4,-1,0,-1,0],1,0)})};d.exports.process=g}},b[18]={value:function(a,c,d){var e=b.r(26),f=b.r(15).process,g=function(a,b,c,d){d=d||127,f(a);var g=e.copyImageData(a);e.each.xDirection(a,b,0,0,b,c,function(f,h,i){a[f]=a[f+1]=a[f+2]=e.convolution(e.getImageConvolution(g,b,c,h,i,0,2,d),[0,0,1,0,0,0,1,2,1,0,1,2,-16,2,1,0,1,2,1,0,0,0,1,0,0],1,0)})};d.exports.process=g}},b[19]={value:function(a,c,d){function e(a,b,c,d){return a[d*b+c]}function f(a,b,c,d){var f,g,h,i,j,k,l=new o(3,3),m=1,n=e(d[m],a,b,c);return f=e(d[m],a,b+1,c)+e(d[m],a,b-1,c)-2*n,g=e(d[m],a,b,c+1)+e(d[m],a,b,c-1)-2*n,h=e(d[m+1],a,b,c)+e(d[m-1],a,b,c)-2*n,i=(e(d[m],a,b+1,c+1)+e(d[m],a,b-1,c-1)-e(d[m],a,b+1,c-1)-e(d[m],a,b-1,c+1))/4,j=(e(d[m+1],a,b+1,c)+e(d[m-1],a,b-1,c)-e(d[m-1],a,b+1,c)-e(d[m+1],a,b-1,c))/4,k=(e(d[m+1],a,b,c+1)+e(d[m-1],a,b,c-1)-e(d[m+1],a,b,c-1)-e(d[m-1],a,b,c+1))/4,l[0][0]=f,l[1][1]=g,l[2][2]=h,l[0][1]=l[1][0]=i,l[0][2]=l[2][0]=j,l[1][2]=l[2][1]=k,l}function g(a,b,c,d){var f=1;return[(e(d[f],a,b+1,c)-e(d[f],a,b-1,c))/2,(e(d[f],a,b,c+1)-e(d[f],a,b,c-1))/2,(e(d[f+1],a,b,c)-e(d[f-1],a,b,c))/2]}function h(a,b,c,d,e){var h=f(a,b,c,d).inverse();return void 0===e&&(e=g(a,b,c,d)),h["*"](e).toArray().map(function(a){return-a})}function i(a,b,c,d,f,h){var i=0,j=1;void 0===h&&(h=g(a,b,c,d));for(var k=0;3>k;k++)i+=h[k]*f[k];return Math.abs(.5*i+e(d[j],a,b,c))}function j(a,b,c,d){var e=g(a,b,c,d),f=h(a,b,c,d,e),j=i(a,b,c,d,f,e);return f.every(function(a){return Math.abs(a)<=.5})&&j>=.03}var k=b.r(26),l=b.r(15).process,m=(b.r(14).process,b.r(13).diff),n=k.drawCorner,o=(b.r(23).process,b.r(24)),p=3,q=2,r=.5,s=function(a,b,c,d){b=b||3;var e=Math.pow(2,1/b);return Math.pow(e,2*(c-1)+d-1)*a},t=function(a,b,c){for(var d=b>>1,e=c>>1,f=new Uint8ClampedArray(b*c),g=0;c>g;g+=2)for(var h=0;b>h;h+=2)for(var i=g*b+h<<2,j=(g>>1)*d+(h>>1)<<2,l=0;4>l;l++)f[j+l]=a[i+l];return k.createImageDate(f,d,e)},u=function(a,b,c,d,e){return m(a,b,c,q,q,d,e,!1)},v=function(a,b,c,d,e,f){var g,h,i,j=0;if(a[1][d]<3&&a[1][d]>-3)return 0;for(var k=-1;1>=k;k++)if(h=f+k,!(0>h||h===c))for(var l=-1;1>=l;l++)if(g=e+l,!(0>g||g===b)){i=h*b+g;for(var m=0;3>m;m++)if(i!==d||1!==m)if(a[1][d]<a[m][i]){if(j>0)return 0;j=-1}else{if(!(a[1][d]>a[m][i]))return 0;if(0>j)return 0;j=1}}return j},w=function(a,b,c,d,e,f){for(var g=[],h=[],i=2;f+2>=i;i++){var j=s(r,d,e,i);h.push(j)}for(var i=0;f>i;i++)g.push(u(a,b,c,h[i],h[i+1]));return g},x=function(a,b,c,d){var e={data:a,width:b,height:c},f=[e,e=t(e.data,e.width,e.height),t(e.data,e.width,e.height)];return f.map(function(a,b){return w(a.data,a.width,a.height,d,b,p)})},y=function(a,b,c){l(a);var d=x(a,b,c,3),e=[];d.forEach(function(a,d){for(var f=Math.pow(2,d),g=b/f,h=c/f,i=0,k=1;h-1>k;k++)for(var l=1;g-1>l;l++){i=k*g+l;var m=v(a,g,h,i,l,k);m&&j(g,l,k,a)&&e.push({x:l*f,y:k*f,corner:m})}}),e.map(function(d){switch(d.corner){case 1:n(a,b,c,d.x,d.y,[255,0,0]);break;case-1:n(a,b,c,d.x,d.y,[0,255,0]);break;default:throw new Error("有异常角点出现，请检测程序问题！")}})};d.exports.process=y}},b[20]={value:function(a,c,d){var e=b.r(26),f=b.r(15).process,g=b.r(14),h=function(a,b,c,d,h,i){i=i||127,f(a),g.process(a,b,c,3,1,i);var j,k,l,m=[-1,0,1,-2,0,2,-1,0,1],n=[-1,-2,-1,0,0,0,1,2,1],o=e.copyImageData(a),p=4,q=0;e.each.xDirection(a,b,0,0,b,c,function(d,f,g){j=e.convolution(e.getImageConvolution(o,b,c,f,g,0,1,i),m,1,0),k=e.convolution(e.getImageConvolution(o,b,c,f,g,0,1,i),n,1,0),l=Math.sqrt(j*j+k*k),a[d]=a[d+1]=a[d+2]=l,q+=l}),d!==!1&&+d||(d=p*q/b/c),e.each.xDirection(a,b,0,0,b,c,function(b){h||(a[b]>d?a[b]=a[b+1]=a[b+2]=255:a[b]=a[b+1]=a[b+2]=0)})};d.exports.process=h}},b[21]={value:function(a,b,c){function d(a,b,c,d,e,f,g,h,i){if(!(h>=b||i>=c))for(var j=b>h+f?f:b-h,k=c>i+g?g:c-i,l=h;j>l;l++)for(var m=i;k>m;m++)for(var n=m*b+l<<2,o=0;3>o;o++)a[n+o]=d[o]*(1-e)+a[n+o]*e}c.exports.process=d}},b[22]={value:function(a,c,d){var e=b.r(26),f=b.r(15).process,g=b.r(14).process,h=b.r(17).process,i=function(a,b,c,d){f(a,b,c),g(a,b,c,3,1),h(a,b,c,d);var i=0;e.each.xDirection(a,b,0,0,b,c,function(b){var c=a[b]+a[b+1]+a[b+2];15>c||765===c?(i++,a[b]=a[b+1]=a[b+2]=0):a[b]=a[b+1]=a[b+2]=255})};d.exports.process=i}},b[23]={value:function(a){var c={},d=b.r(26),e=function(a,b,c){return b+c*a<<2},f=function(a,b,c,d){var f=Math.floor(c),g=Math.floor(d),h=Math.ceil(c),i=Math.ceil(d);c-=f,d-=g;for(var j=new Array(4),k=0;3>k;k++)j[k]=(1-c)*(1-d)*a[e(b,f,g)+k]+c*d*a[e(b,h,i)+k]+(1-c)*d*a[e(b,f,i)+k]+c*(1-d)*a[e(b,h,i)+k];return j[3]=255,j},g=function(a,b,c,e,g){if(e=e||1,g=g||e,1===e&&e===g)return new ImageData(a,b,c);var h=Math.floor(e*b),i=Math.floor(g*c);e=(h-1)/(b-1),g=(i-1)/(c-1);var j=new Uint8ClampedArray(h*i*4);return d.each.xDirection(j,h,0,0,h,i,function(c,d,h){f(a,b,d/e,h/g).map(function(a,b){j[c+b]=a})}),new ImageData(j,h,i)};return c.process=g,c}},b[24]={value:function(a){var b=function(){switch(Array.prototype.constructor.call(this),this.width=0,this.height=0,arguments.length){case 1:var a=arguments[0];if(a instanceof Array)return this.copy(a);break;case 2:case 3:if(this.width=+arguments[0],this.height=+arguments[1],this.width<0||this.height<0)throw new Error("Matrix(width, height, value) 构造函数width,height不能为负");for(var b=+arguments[2]||0,c=0;c<this.height;c++)this.push(Array(this.width).fill(b));return this;default:return this}};return b.prototype=Object.create(Array.prototype),b.prototype.valueOf=function(){return"[["+this.join("],[")+"]]"},b.prototype.toString=function(){return"[["+this.join("],[")+"]]"},b.prototype.toArray=function(){return this.reduce(function(a,b){return a.concat(b)},[])},b.prototype.eql=function(a){return a instanceof b?this.valueOf()===a.valueOf():a instanceof Array&&this.length===a.length?(this.forEach(function(b,c){return b.toString()!==a[c].toString()?!1:void 0}),!0):!1},b.prototype.copy=function(a){if(!(a instanceof Array))throw new Error("参数传入不是数组！");var b,c,d,e;for(b=0,c=a.length;c>b;b++){if(this[b]instanceof Array)for(var f=this.length-c;f>0;)this.pop(),f--;else void 0===this[b]?this.push([]):this[b]=[];for(d=0,e=a[b].length;e>d;d++)if(void 0===this[b][d])this[b].push(a[b][d]);else{for(var f=this[b].length-e;f>0;)this[b].pop(),f--;this[b][d]=a[b][d]}}this.width=e,this.height=c},b.prototype.set=function(a,b,c){if(a>=this.width||0>a||b>=this.height||0>b)throw new Error("Matrix::set 设置的("+a+", "+b+")超界");this[b][a]=c},b.prototype["*"]=function(a){var b=[],c=this,d=a,e=c.length,f=c[0].length,g=d[0].length,h=d.length;if(f!==h)throw new Error("矩阵左侧乘子的宽度与右侧乘子高度不等，无法相乘");for(var i=0;e>i;i++){b.push([]);for(var j=0;g>j;j++){b[i].push(0);for(var k=0;f>k;k++)b[i][j]+=c[i][k]*d[k][j]}}return this.copy(b),this},b.prototype.inverse=function(){if(this.width&&this.width!==this.height)throw new Error("只有方阵才能求逆！");var a=this.det();if(0===a)throw new Error("该方阵不存在逆矩阵！");for(var b=this.width,c=this.height,d=[],e=0;c>e;e++){d.push([]);for(var f=0;b>f;f++)d[e].push(Math.pow(-1,e+f)*this.reducedOrderMatrix(f,e).det()/a)}return this.copy(d),this},b.prototype.det=function(){if(this.width&&this.width!==this.height)throw new Error("只有方阵才能求值！");if(2===this.width)return this[0][0]*this[1][1]-this[0][1]*this[1][0];for(var a=0,b=0;b<this.width;b++)a+=Math.pow(-1,b)*this[0][b]*this.reducedOrderMatrix(0,b).det();return a},b.prototype.reducedOrderMatrix=function(a,c){var d=[],e=this.height,f=this.width,g=0;if(a>=e||c>=f)throw new Error("目标超出矩阵范围，无法获取！");for(var h=0;e>h;h++)if(h!==a){d.push([]),g=d.length-1;for(var i=0;f>i;i++)i!==c&&d[g].push(this[h][i])}return new b(d)},b}},b[25]={value:function(a,c,d){var e=b.r(26);["xDirection","yDirection"].map(function(a){return d.exports[a]=function(b,c,d,f){var g=[].slice.call(arguments);if(b=g.shift(),f=g.pop(),!e.isFunction(f))throw new Error("没有传入合法回调函数");var h=b.width,i=b.height,j=c.x||c[0]||0,k=c.y||c[1]||0,l=d.x||d[0]||h,m=d.y||d[1]||i;e.each[a](b.data,h,j,k,l,m,f)},{name:a,constructor:function(b,c,d,f){var g=[].slice.call(arguments);if(b=g.shift(),f=g.pop(),!e.isFunction(f))throw new Error("没有传入合法回调函数");var h=b.width,i=b.height,j=c.x||c[0]||0,k=c.y||c[1]||0,l=d.x||d[0]||h,m=d.y||d[1]||i;e.each[a](b.data,h,j,k,l,m,f)}}}).forEach(function(a){})}},b[26]={value:function(a){var b={},c={xDirection:function(a,b,c,d,e,f,g){for(var h=d;f>h;h++)for(var i=c;e>i;i++)g(h*b+i<<2,i,h)},yDirection:function(a,b,c,d,e,f,g){for(var h=c;e>h;h++)for(var i=d;f>i;i++)g(i*b+h<<2,h,i)}},d=function(a,b,c,d){var e=0,f=0;for(f=0,l=b.length;f<l;f++)e+=b[f]*a[f];return e/c+d},e=function(a,b,c,d,e,f,g,h){var i,j,k=0,l=0,m=[],g=g||1,h=h||a[4*(b*e+d)+f];for(l=-g;g>=l;l++)for(i=e+l,k=-g;g>=k;k++)j=d+k,i>c-1||0>i||j>b-1||0>j?m.push(h):m.push(a[4*(j+b*i)+f]);return m},f=function(a){return new Uint8ClampedArray(a)},g=function(a){return Array.prototype.slice.call(a)},h=function(a,b,c){if(a instanceof Array)a=f(a);else if(!(a instanceof Uint8ClampedArray))throw new Error("传入数据类型有问题");return new ImageData(a,b,c)},i=function(a,b,c,d,e,f){var g,h=0;f=f||[255,0,0],[-1,0,1].map(function(i){h=e*b+d+i<<2,g=(e+i)*b+d<<2,0>h||h===b||0>g||g===c||(a[h]=f[0],a[h+1]=f[1],a[h+2]=f[2],a[g]=f[0],a[g+1]=f[1],a[g+2]=f[2])})};["Array","Function","Object","String","Boolean","Number"].forEach(function(a){b["is"+a]=function(a){return function(b){return Object.prototype.toString.call(b)==="[object "+a+"]"}}(a)});var j=function(a){var b=a;this.set=function(a){0>a||a>255||(b=a)},this.val=function(a){return b}};return b.each=c,b.drawCorner=i,b.getImageConvolution=e,b.convolution=d,b.copyImageData=f,b.copyToArray=g,b.createImageDate=h,b.BoundaryFillColor=j,b}};var c={"expose-cv":9};a("expose-cv")}();